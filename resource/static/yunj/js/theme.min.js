layui.use(["jquery","cookie","yunj"],function(){let e=window;let h=layui.jquery;let i=layui.cookie;class t{constructor(){this.list=YUNJ_THEME;this.tpl_id="theme_tpl";this.code_key="theme_code";this.curr_code="default";this.curr_theme=null;this.init()}init(){let e=this;e.setData();e.setThemeStylesheet();e.setThemeTplLayout()}set(e){let t=this;if(!e||!yunj.isString(e)||!t.list.hasOwnProperty(e))return false;i.set(t.code_key,e);t.init()}setData(){let e=this;e.curr_code=i.get(e.code_key)||"default";e.curr_theme=e.list[e.curr_code]}setThemeStylesheet(){let i=this;i.setThemeStylesheetLink();h("iframe").each(function(e,t){i.setThemeStylesheetLink(e)})}setThemeStylesheetLink(e=null){let t=this;let i=e===null?h("head"):h("iframe").eq(e).contents().find("head");let l=t.curr_theme.style_file;let s=i.find("link[theme]").length;if(!s){i.append("<link>");i.find("link:last").attr({rel:"stylesheet",type:"text/css",href:l,theme:true})}else{let e=i.find("link[theme]");e.attr("href",l)}return true}setThemeTplLayout(){if(yunj.isExistParent())return false;let l=this;let e=h(`#${l.tpl_id}`).length;if(!e){let i="";for(let t in l.list){if(!l.list.hasOwnProperty(t))continue;let e=l.list[t];yunj.includeCss(e.tpl_style_file);i+=`<li class="${t}" data-code="${t}" title="${e.title}">
                                <div class="t"></div>
                                <div class="l">
                                    <div class="item"></div>
                                    <div class="item"></div>
                                </div>
                              </li>`}i=`<script type="text/html" id="${l.tpl_id}"><ul class="theme-box">${i}</ul></script>`;h("body").append(i)}}setThemeTplActive(){let e=this;let t=h(".theme-box");t.find("li").removeClass("active");t.find(`li.${e.curr_code}`).eq(0).addClass("active")}}e.yunj.theme=new t});