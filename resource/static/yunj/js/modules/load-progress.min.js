layui.define(["yunj"],function(s){class r{constructor(s){this.version="1.0.0";this.raw_args=s;this.index=null;this.elem=null;this.auto_close=true;this.rand_progress=true;this.rand_progress_timer_rate=1e3;this.rand_progress_timer=null;this.progress_num=0;this.tips="";this.open_callback=null;this.done_callback=null;this.close_callback=null;this.init()}init(){let s=this;s.set_data();s.open();return s}set_data(){let s=this;s.auto_close=s.raw_args.auto_close;s.tips=s.raw_args.tips;s.rand_progress=s.raw_args.rand_progress;s.rand_progress_timer_rate=s.raw_args.rand_progress_timer_rate;s.open_callback=s.raw_args.open;s.done_callback=s.raw_args.done;s.close_callback=s.raw_args.close}open(){let e=this;let s={title:false,shade:.2,btn:[],time:60*60*1e3,skin:"yunj-load-progress",content:`<div class="load-box">
                              <div class="tips-box"></div>
                              <div class="progress-box">
                                <div class="layui-progress layui-progress-big">
                                  <div class="layui-progress-bar" style="width:0%;">
                                    <span class="layui-progress-text">0%</span>
                                  </div>
                                </div>
                              </div>
                          </div>`,success:function(s,r){e.elem=s;e.set_tips();e.reset_progress(0);e.rand_progress&&e.set_rand_progress();e.open_callback&&e.open_callback()},end:function(){e.rand_progress_timer&&clearInterval(e.rand_progress_timer)&&(e.rand_progress_timer=null);e.close_callback&&e.close_callback()}};e.index=top.layer.open(s)}set_tips(s=""){let r=this;s=s||r.tips;r.elem.find(".tips-box").html(s);r.tips=s}set_rand_progress(){let r=this;r.rand_progress_timer=setInterval(function(){let s=r.progress_num+Math.random()*10|0;s=s>99?99:s;r.reset_progress(s)},300+Math.random()*r.rand_progress_timer_rate)}reset_progress(s){let r=this;if(s>=100){r.rand_progress_timer&&clearInterval(r.rand_progress_timer)&&(r.rand_progress_timer=null);r.done_callback&&r.done_callback(r);if(r.auto_close){setTimeout(function(){yunj.close(r.index)},2e3)}}r.progress_num=s;let e=s+"%";r.elem.find(".progress-box .layui-progress-bar").css({width:e});r.elem.find(".progress-box .layui-progress-text").html(e)}}let e=(s={})=>{s=yunj.objSupp(s,{auto_close:true,tips:"",rand_progress:true,rand_progress_timer_rate:1e3,open:null,done:null,close:null});return new r(s)};s("loadProgress",e)});