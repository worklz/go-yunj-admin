layui.define(["TableColTemplet","jquery","yunj"],function(t){let e=layui.TableColTemplet;let l=window;let n=document;let o=layui.jquery;class i extends e{constructor(t){super(t)}async renderBefore(){let t=this;let l=t.args.options;if(!yunj.isObj(l)){throw new Error(`表头模板[enum]的配置属性[options]需为{key:value}或{key:{text:'xxx','bgColor':'xxx'}}键值对`)}for(let e in l){if(!l.hasOwnProperty(e)){continue}let t=l[e];if(!yunj.isObj(t)){t={text:t}}t=yunj.objSupp(t,{text:"",bgColor:""});l[e]=t}return"done"}layout(){let t=this;let e=t.args.options;if(e.length<=0)return"";let l=JSON.stringify(e).replace("{{","{ {").replace("}}","} }");return`{{# 
                        let options = ${l};
                        let vals = d.${t.key};
                        if(yunj.isString(vals)&&vals.length>0) 
                            vals = yunj.isJson(vals)?JSON.parse(vals):(vals.indexOf(",")!==-1?vals.split(","):[vals]);
                        else if(yunj.isNumber(vals)) 
                            vals = [vals];
                        if(!yunj.isArray(vals)) vals = [];
                        let enumHtml = "";
                        for(let i=0,l=vals.length;i<l;i++){
                            let val = vals[i];
                            if(options.hasOwnProperty(val)) {
                                let option = options[val];
                                let styleContent = '';
                                if (option.bgColor) {
                                    styleContent = 'style="color:#fff;background-color:'+option.bgColor+';"';
                                }
                                let itemHtml = '<span class="item" title="点击复制" '+styleContent+'>'+option.text+'</span>';
                                enumHtml += itemHtml;
                            }
                        }
                     }}
                     <div class="table-row-enum" title="点击复制">{{- enumHtml }}</div>`}defineExtraEventBind(){let t=this;if(yunj.isUndefined(l.TABLE_ROW_ENUM_CLICK_COPY_EVENT_BIND)){l.TABLE_ROW_ENUM_CLICK_COPY_EVENT_BIND=true;o(n).on("click",".table-row-enum .item",function(t){yunj.copy(o(this).html());t.stopPropagation()})}}}t("TableColEnum",i)});