layui.define(["jquery","yunj"],function(t){let e=window;let y=document;let _=layui.jquery;class n{constructor(){this.init();this.container_el=null;this.control_el=null;this.dropdown_container_el=null}init(){let t=this;t.set_event_bind()}set_el(t){let n=this;let e=t.parent(".yunj-dropdown-group");n.container_el=e;n.control_el=t;n.dropdown_container_el=e.find("dl");return n}is_open(){let t=this;return t.control_el.hasClass("btn-group-retract")}set_event_bind(){let n=this;_(e).resize(function(){n.retract()});_(y).scroll(function(){n.retract()});_(y).click(function(t){if(_(t.target).parents(".yunj-dropdown-group").length===0){n.retract()}});_(y).on("click",".yunj-dropdown-group>button.btn-group-control",function(t){n.set_el(_(this)).is_open()?n.retract():n.retract().open();t.stopPropagation()})}open(){let t=this;t.control_el.removeClass("btn-group-open").addClass("btn-group-retract");let n=t.control_el;let e=t.container_el;let o=t.dropdown_container_el;let r=e.offset().left;let l=e.offset().top;let i=_(y).width();let u=_(y).scrollTop();let s=n.outerWidth();let p=n.outerHeight();let d=5;let a=parseInt(l+p-u+d);let c=parseInt(r);let g=parseInt(i-r-s);o.css({top:`${a}px`,left:c<g?`${c}px`:"auto",right:c>g?`${g}px`:"auto","text-align":c<g?"left":"right"});o.slideToggle("fast");return t}retract(){let t=this;_(y).find(".yunj-dropdown-group>button.btn-group-control").removeClass("btn-group-retract").addClass("btn-group-open");_(y).find(".yunj-dropdown-group>dl").hide();return t}layout(t){let n=this;return`<div class="yunj-dropdown-group">
                            <button type="button" class="layui-btn layui-btn-xs layui-btn-primary layui-icon btn-group-control btn-group-open">操作</button>
                            <dl>${t}</dl>
                        </div>`}}if(!yunj.hasOwnProperty("dropdown")){yunj.dropdown=new n}t("ydropdown",yunj.dropdown)});