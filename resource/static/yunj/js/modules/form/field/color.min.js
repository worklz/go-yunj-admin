layui.define(["FormField","jquery"],function(o){let l=layui.FormField;let e=window;let t=document;let i=layui.jquery;class n extends l{constructor(o={}){super(o);this.colorActionBox=null;this.colorInputEl=null;this.colorShowEl=null}defineExtraArgs(){let o=this;return{}}handleArgs(o){if(o.verify.indexOf("hexColor")===-1)o.verify+=(o.verify?"|":"")+"hexColor";return o}layoutControl(){let o=this;let l=`<div class="field-color-box">
                                    <div class="field-color-action-box" title="${o.args.readonly?"禁用":"选择/编辑颜色"}">
                                        <input type="text" class="layui-input field-color-action-input" readonly maxlength="7" autocomplete="off">
                                        <span class="field-color-action-show"></span>
                                    </div>
                                </div>`;return`<div class="layui-input-inline yunj-form-item-control">${l}</div>`}async renderBefore(){let o=this;if(o.args.readonly)return"done";await yunj.includeCss("/static/yunj/libs/colpick/colpick.css?v=1.0.6");await yunj.includeJs(`/static/yunj/libs/colpick/colpick.js?v=1.0.6`);return"done"}renderDone(){let n=this;n.colorActionBox=n.boxEl.find(".field-color-action-box");n.colorInputEl=n.boxEl.find(".field-color-action-input");n.colorShowEl=n.boxEl.find(".field-color-action-show");if(n.args.readonly)return false;n.colorActionBox.colpick({layout:"hex",submit:0,colorScheme:"dark",onChange:function(o,l,e,t,i){n.setColor(`#${l}`)}})}setValue(o=""){let l=this;l.setColor(o);if(l.args.readonly)return false;l.colorActionBox.colpickSetColor(o)}getValue(){let o=this;return o.colorInputEl.val()}setColor(o){let l=this;if(!yunj.isString(o)||!/^#[a-zA-Z0-9]{6}$/.test(o))o="#000000";l.colorInputEl.val(o);l.colorShowEl.css("backgroundColor",o)}defineExtraEventBind(){let o=this;if(yunj.isUndefined(e.FORM_FIELD_COLOR_SCROLL_HIDE_COPY_EVENT_BIND)){e.FORM_FIELD_COLOR_SCROLL_HIDE_COPY_EVENT_BIND=true;i(".yunj-iframe-content").scroll(function(o){let l=i(".colpick ");if(l.length>0)l.hide()});i(".layui-tab-content").scroll(function(o){let l=i(".colpick ");if(l.length>0)l.hide()})}}}o("FormFieldColor",n)});