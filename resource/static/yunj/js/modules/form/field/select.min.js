layui.define(["FormField","FormFieldActions"],function(e){let t=layui.FormField;let n=layui.FormFieldActions;let i=layui.jquery;class l extends t{constructor(e={}){super(e);this.showBoxEl=null;this.inputEl=null;this.selectPopupContentEl=null}defineExtraArgs(){let e=this;return{options:[],search:false}}handleArgs(e){let t=Object.keys(e.options);if(e.default==="")e.default=t[0];if(e.verify.indexOf("in")===-1)e.verify+=(e.verify?"|":"")+`in:${t.join(",")}`;return e}layoutControl(){let e=this;let t=`<div class="show-box">
                                    <input type="text" name="${e.id}" readonly placeholder="请选择" autocomplete="off" class="layui-input">
                                </div>`;return`<div class="layui-input-inline yunj-form-item-control">${t}</div>`}renderDone(){let e=this;e.showBoxEl=e.boxEl.find(".show-box");e.inputEl=e.boxEl.find(`.show-box>input[name=${e.id}]`);let l="";let i=e.args.options;for(let t in i){if(!i.hasOwnProperty(t))continue;let e=i[t];l+=`<dd data-value="${t}" title="${e}">${e}</dd>`}let t=`<dl class="items-box">${l}</dl>`;e.fieldActions=new n({fieldObj:e,fieldValueElSelector:`.show-box>input[name=${e.id}]`,actions:{contentClear:null,selectPopup:{contentHtml:t,showAfter:e.renderSelectItems}}});e.selectPopupContentEl=e.fieldActions.getActionObj("selectPopup").selectContentEl}setValue(t=""){let l=this;let e=l.args.options[t]||null;if(l.selectPopupContentEl){let e=l.selectPopupContentEl.find(".items-box dd");if(e.length>0){e.removeClass("active")}}if(e===null){l.inputEl.data("value","");l.inputEl.val("")}else{l.inputEl.data("value",t);l.inputEl.val(e);if(l.selectPopupContentEl){let e=l.selectPopupContentEl.find(`.items-box dd[data-value="${t}"]`);if(e.length>0){e.addClass("active")}}}}getValue(){let e=this;return e.inputEl.data("value")}renderSelectItems=()=>{let e=this;let t=e.getValue();e.selectPopupContentEl.find(".items-box dd").removeClass("active");let l=e.selectPopupContentEl.find(`.items-box dd[data-value="${t}"]`);if(l.length>0){l.addClass("active")}};defineExtraEventBind(){let l=this;l.boxEl.on("click",".items-box dd",function(e){e.stopPropagation();let t=i(this);if(!t.hasClass("active")){l.setValue(t.data("value"))}else{l.setValue()}})}}e("FormFieldSelect",l)});