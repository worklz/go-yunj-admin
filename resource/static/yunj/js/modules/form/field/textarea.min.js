layui.define(["FormField"],function(e){let t=layui.FormField;class a extends t{constructor(e={}){super(e);this.limitMaxCharNum=0;this.charNumEl=null}defineExtraArgs(){let e=this;return{placeholder:""}}defineBoxHtml(){let e=this;return`<div class="layui-form-item yunj-form-item yunj-form-textarea yunj-form-item-label-width-fill" id="${e.id}">__layout__</div>`}async renderBefore(){let l=this;let e=l.args.verify;if(e&&e.indexOf("max:")!==-1){let a=e.split("|");for(let t=0;t<a.length;t++){let e=a[t];if(e.indexOf("max:")===0){l.limitMaxCharNum=parseInt(e.replace("max:",""));break}}}}layoutControl(){let e=this;let t=`<textarea name="${e.id}" ${e.args.readonly?"readonly":""}
                        placeholder="${e.args.placeholder}" class="layui-textarea"></textarea>
                        <span class="char-num"></span>`;return`<div class="layui-input-inline yunj-form-item-control">${t}</div>`}async renderDone(){let e=this;e.charNumEl=e.boxEl.find(`.char-num`)}setValue(e=""){let t=this;t.boxEl.find(`textarea[name=${t.id}]`).val(e);t.setCurrCharNum()}getValue(){let e=this;return e.boxEl.find(`textarea[name=${e.id}]`).val()}setCurrCharNum(){let e=this;let t=e.getValue().length;let a=t;let l="#d2d2d2";if(e.limitMaxCharNum>0){a=`${t}/${e.limitMaxCharNum}`;if(t>e.limitMaxCharNum){l="#ff5722"}}e.charNumEl.html(a).css("color",l)}defineExtraEventBind(){let e=this;e.boxEl.on("input",`textarea[name=${e.id}]`,function(){e.setCurrCharNum()})}}e("FormFieldTextarea",a)});